<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Abertura</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Seu CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="bg-secondary">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark ">
    <div class="container">
      <form class="d-flex" method="get" action="{{ url_for('pagina_aberturas') }}">
        <input
          class="form-control me-2"
          type="search"
          name="q"
          placeholder="Pesquisar abertura..."
          value="{{ request.args.get('q', '') }}"
        >
        <button class="btn btn-success" type="submit">
          Pesquisar
        </button>
      </form>
      <h3 class="text-white">
        {% if nome %}
          Olá, {{ nome }}, essa é {{ abertura.Nome }}
        {% else %}
          Essa é {{ abertura.Nome }}
        {% endif %}
      </h3>

      <a class="navbar-brand" href="#"></a>

      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#menu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="menu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="{{ url_for('index')}}">Início</a></li>
        <li class="nav-item"><a class="nav-link" href="#sobre">Sobre</a></li>
        <li class="nav-item"><a class="nav-link" href="#abertura">Aberturas</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('pagina_favoritos') }}">Favoritos</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('cadastro_abertura') }}">Cadastro Abertura</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('cadastro_usuario') }}">Se cadastre agora</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('pagina_aberturas') }}">Acesse as aberturas</a></li>

      </ul>
      </div>

    </div>
  </nav>


<!-- CONTEÚDO PRINCIPAL -->
<div class="container abertura-detalhe mt-5">

  <div class="row">

    <!-- IMAGEM -->
    <div class="col-md-4">
      <div class="img-box">
        <img src="{{ url_for('static', filename='tabuleiros/' ~ abertura.img_tabuleiro) }}"
             alt="{{ abertura.Nome }}">
      </div>
    </div>

    <!-- INFORMAÇÕES -->
    <div class="col-md-8 text-white">
      <h2 class="mb-3">{{ abertura.Nome }}</h2>

      <p>
        <strong>Estilo:</strong><br>
        {{ abertura.Estilo }}
      </p>
      <p>
        <strong>Descrição:</strong><br>
        {{ abertura.Descricao }}
      </p>

      <p>
        <strong>ECO:</strong> {{ abertura.Eco }}
      </p>

      <p>
        <span class="badge bg-primary">{{ abertura.Tipo }}</span>
        <span class="badge bg-success">{{ abertura.Nivel }}</span>
      </p>
    </div>

  </div>

</div>
<hr class="text-white mt-4">

<h4 class="text-white">Comentários</h4>

<!-- FORMULÁRIO -->
<form action="{{ url_for('comentar_abertura', id_abertura=abertura.idAbertura) }}"
      method="post"
      class="mb-4">

  <div class="mb-3">
    <textarea class="form-control"
              name="comentario"
              rows="3"
              placeholder="Escreva seu comentário..."
              required></textarea>
  </div>

  <button type="submit" class="btn btn-success">
    Comentar
  </button>
</form>

<hr class="text-white">

<h4 class="text-white mt-4">Comentários</h4>

{% if comentarios|length == 0 %}
  <p class="text-white">Nenhum comentário ainda. Seja o primeiro a comentar!</p>
{% endif %}

{% for comentario in comentarios %}
  <div class="card mb-3 comentario-card">
    <div class="card-body">
      <h6 class="card-subtitle mb-1 comentario-autor">
        {{ comentario.Nome }}
      </h6>

      <small class="comentario-data">
        {{ comentario.DataCriacao.strftime('%d/%m/%Y %H:%M') }}
      </small>

      <p class="card-text comentario-texto mt-2">
        {{ comentario.Texto }}
      </p>
    </div>
  </div>

{% endfor %}

</body>
</html>
